---
# PodDisruptionBudget para el API Gateway
# Garantiza que al menos 1 pod siga disponible
# durante un node drain o un rolling update.
# Evita downtime accidental cuando Kubernetes mueve pods.

apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: api-gateway-pdb
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: api-gateway

---
# PodDisruptionBudget para el User Service
# Misma lógica: siempre mantener mínimo 1 pod activo.
# Esto protege frente a mantenimientos o reinicios de nodos.

apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: user-service-pdb
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: user-service
